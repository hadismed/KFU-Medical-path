# ===== АНАЛИЗАТОР АРТЕРИАЛЬНОГО ДАВЛЕНИЯ =====
# Автор: Хадис Масуми (15 лет, Иран)

import csv
from datetime import datetime

def классифицировать_давление(систолическое, диастолическое):
    """Классификация по стандарту AHA"""
    if систолическое < 90 or диастолическое < 60:
        return "Низкое", "Увеличьте потребление воды"
    elif систолическое < 120 and диастолическое < 80:
        return "Нормальное", "Отличный результат! Поддерживайте здоровый образ жизни"
    elif 120 <= систолическое <= 129 and диастолическое < 80:
        return "Повышенное", "Уменьшите потребление соли, увеличьте физическую активность"
    elif (130 <= систолическое <= 139) or (80 <= диастолическое <= 89):
        return "Гипертония 1 стадии", "Проконсультируйтесь с врачом в течение недели"
    else:
        return "Гипертония 2 стадии", "СРОЧНО обратитесь за медицинской помощью"

def сохранить_в_csv(систолическое, диастолическое, категория):
    """Сохранение истории измерений"""
    with open('история_давления.csv', 'a', newline='', encoding='utf-8') as файл:
        writer = csv.writer(файл)
        if файл.tell() == 0:
            writer.writerow(["Дата", "Систолическое", "Диастолическое", "Категория"])
        writer.writerow([
            datetime.now().strftime("%Y-%m-%d %H:%M"),
            систолическое,
            диастолическое,
            категория
        ])

# ============= ТЕСТИРОВАНИЕ =============
if __name__ == "__main__":
    тестовые_значения = [(115, 75), (142, 92), (125, 78)]
    for с, д in тестовые_значения:
        катег, совет = классифицировать_давление(с, д)
        сохранить_в_csv(с, д, катег)
        print(f"{с}/{д}: {катег} → {совет}")
